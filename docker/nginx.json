{
  "access_log": "/dev/stdout",
  "listeners": {
    "*:80": {
      "pass": "routes"
    }
  },
  "routes": [
    {
      "match": {
        "uri": "/api"
      },
      "action": {
        "return": 301,
        "location": "/api/"
      }
    },
    {
      "match": {
        "uri": "/api/*"
      },
      "action": {
        "pass": "applications/rdwatch"
      }
    },
    {
      "action": {
        "share": "/app/vue/dist/$uri"
      }
    },
    {
      "match": {
        "uri": "/service"
      },
      "action": {
        "return": 301,
        "location": "/service/"
      }
    },
    {
      "match": {
        "uri": "/service/*"
      },
      "action": {
        "pass": "applications/rdwatch_vector_tiles"
      }
    }
  ],
  "applications": {
    "rdwatch": {
      "type": "python 3.11",
      "user": "rdwatch",
      "group": "rdwatch",
      "path": "/app/django/",
      "home": "/poetry/venvs/rdwatch/",
      "module": "rdwatch.server",
      "threads": 25,
      "limits": {
        "timeout": 120,
        "requests": 5000
      }
    },
    "rdwatch_vector_tiles": {
      "type": "external",
      "working_directory": "/app/services/vector_tiles",
      "executable": "/usr/bin/env",
      "arguments": [
          "node",
          "--loader",
          "unit-http/loader.mjs",
          "--require",
          "unit-http/loader",
          "app.mjs"
      ]
  }
  },
  "settings": {
    "http": {
      "max_body_size": 134217728
    }
  }
}
